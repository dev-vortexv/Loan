"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[604],{93124:function(e,i,n){n.d(i,{L:function(){return d},d:function(){return a}});var l=n(16491),r=n(82053),s=n(44414);function a(e){const{children:i,value:n,index:a,...d}=e;return(0,s.jsx)("div",{role:"tabpanel",hidden:n!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...d,children:n===a&&(0,s.jsx)(l.A,{children:(0,s.jsx)(r.A,{children:i})})})}function d(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}},20660:function(e,i,n){n.d(i,{A:function(){return y}});n(9950);var l=n(10226),r=n(59254),s=n(63464),a=n(40033),d=n(28170),t=n(79739),o=n(25333),c=n(96319),u=n(82053),x=n(93230),h=n(44414);const v=(0,r.Ay)(s.A)((e=>{let{theme:i}=e;return{"& .MuiDialogContent-root":{padding:i.spacing(2)},"& .MuiDialogActions-root":{padding:i.spacing(1)}}}));function A(e){const{children:i,onClose:n,...l}=e;return(0,h.jsxs)(a.A,{sx:{m:0,p:2},...l,children:[i,n?(0,h.jsx)(o.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,h.jsx)(c.A,{})}):null]})}function y(e){const{openDelete:i,handleCloseDelete:n,deleteData:r,deleteId:s}=e;return(0,h.jsx)("div",{children:(0,h.jsxs)(v,{"aria-labelledby":"customized-dialog-title",open:i,children:[(0,h.jsx)(A,{id:"customized-dialog-title",onClose:n,children:"Delete"}),(0,h.jsx)(d.A,{dividers:!0,children:(0,h.jsx)(u.A,{gutterBottom:!0,p:3,children:"Are you sure you want to delete this item?"})}),(0,h.jsx)(t.A,{children:(0,h.jsxs)(x.A,{direction:"row",spacing:2,children:[(0,h.jsx)(l.A,{variant:"contained",color:"error",onClick:()=>{r(s)},children:"Yes"}),(0,h.jsx)(l.A,{variant:"contained",onClick:n,children:"No"})]})})]})})}},62253:function(e,i,n){n(9950);var l=n(16491),r=n(82053),s=n(44414);i.A=e=>{let{title:i,subtitle:n}=e;return(0,s.jsxs)(l.A,{children:[(0,s.jsx)(r.A,{variant:"h4",fontWeight:"bold",sx:{mb:"5px"},style:{textTransform:"capitalize"},children:i}),(0,s.jsx)(r.A,{variant:"body1",children:n})]})}},13048:function(e,i,n){var l=n(97497);const r={0:"#FFFFFF",100:"#F9FAFB",200:"#F4F6F8",300:"#DFE3E8",400:"#C4CDD5",500:"#919EAB",600:"#637381",700:"#454F5B",800:"#212B36",900:"#161C24"},s={common:{black:"#000",white:"#fff"},primary:{lighter:"#D1E9FC",light:"#76B0F1",main:"#2065D1",dark:"#103996",darker:"#061B64",contrastText:"#fff"},secondary:{lighter:"#D6E4FF",light:"#84A9FF",main:"#3366FF",dark:"#1939B7",darker:"#091A7A",contrastText:"#fff"},info:{lighter:"#D0F2FF",light:"#74CAFF",main:"#1890FF",dark:"#0C53B7",darker:"#04297A",contrastText:"#fff"},success:{lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D",contrastText:r[800]},warning:{lighter:"#FFF7CD",light:"#FFE16A",main:"#FFC107",dark:"#B78103",darker:"#7A4F01",contrastText:r[800]},error:{lighter:"#FFE7D9",light:"#FFA48D",main:"#FF4842",dark:"#B72136",darker:"#7A0C2E",contrastText:"#fff"},grey:r,divider:(0,l.X4)(r[500],.24),text:{primary:r[800],secondary:r[600],disabled:r[500]},background:{paper:"#fff",default:r[100],neutral:r[200]},action:{active:r[600],hover:(0,l.X4)(r[500],.08),selected:(0,l.X4)(r[500],.16),disabled:(0,l.X4)(r[500],.8),disabledBackground:(0,l.X4)(r[500],.24),focus:(0,l.X4)(r[500],.24),hoverOpacity:.08,disabledOpacity:.48}};i.A=s},48875:function(e,i,n){n.d(i,{A:function(){return c}});var l=n(11942),r=n.n(l),s=n(9950),a=n(14650),d=n(16491),t=n(44414);const o=(0,s.forwardRef)(((e,i)=>{let{icon:n,width:l=20,sx:r,...s}=e;return(0,t.jsx)(d.A,{ref:i,component:a.In,icon:n,sx:{width:l,height:l,...r},...s})}));o.propTypes={sx:r().object,width:r().oneOfType([r().number,r().string]),icon:r().oneOfType([r().element,r().string])};var c=o},63604:function(e,i,n){n.r(i),n.d(i,{default:function(){return le}});var l=n(19808),r=n(60899),s=n(93230),a=n(10226),d=n(16491),o=n(11966),c=n(84142),u=n(63464),x=n(40033),h=n(28170),v=n(8145),A=n(79739),y=n(9950),m=n(13564),j=n(62253),p=n(93124),b=n(64432),f=n(48089),g=n(82053),w=n(25333),N=n(13048),C=n(7999),k=n(44414);var D=e=>{let{data:i,onEdit:n}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Personal Details"}),(0,k.jsx)(w.A,{onClick:n,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Borrowers Name"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==i&&void 0!==i&&i.firstName?`${i.firstName} ${i.lastName}`:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Fathers Name"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.fatherName)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Email ID"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.emailID)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Occupation Type"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.occupationType)||"--"})]})]})]})})};var T=e=>{let{data:i,onEdit:n}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Personal Documents Details"}),(0,k.jsx)(w.A,{onClick:n,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Aadhar Number"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.aadhaarNumber)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Pan Number"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.panNumber)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Contact No."}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==i&&void 0!==i&&i.phoneNumber?null===i||void 0===i?void 0:i.phoneNumber:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Documents Status"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.status)||"--"})]})]})]})})};var F=e=>{let{data:i,onEdit:n}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Permanent Address"}),(0,k.jsx)(w.A,{onClick:n,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Address Line1"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==i&&void 0!==i&&i.addressLine1?null===i||void 0===i?void 0:i.addressLine1:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Address Line2"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.addressLine2)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"OwnerShip Type"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.ownerShipType)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Pin Code"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.pinCode)||"--"})]})]})]})})};var S=e=>{let{data:i,onEdit:n}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Residence Address"}),(0,k.jsx)(w.A,{onClick:n,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:" Residence AddressLine1"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==i&&void 0!==i&&i.residenceAddressLine1?null===i||void 0===i?void 0:i.residenceAddressLine1:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Residence AddressLine2"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.residenceAddressLine2)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Residence OwnerShipType"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.residenceOwnerShipType)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Residence PinCode"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.residencePinCode)||"--"})]})]})]})})},B=n(22648),L=n(95929),E=n(94068),I=n(10990),R=n(90576),O=n(18061),P=n(46639),_=n(87536),$=n(27702);var z=e=>{let{data:i}=e;const[n,l]=(0,y.useState)([]),[r,s]=(0,y.useState)(!0);return(0,y.useEffect)((()=>{(async()=>{try{const e=await(0,$.x4)(`loan/loanTimeline/${i._id}`);l(e.data.loans)}catch(e){console.error("Error fetching loans:",e)}finally{s(!1)}})()}),[i._id]),r?(0,k.jsx)(P.A,{}):n.length?(0,k.jsx)(d.A,{children:n.map(((e,i)=>(0,k.jsxs)(f.A,{sx:{mb:3},children:[(0,k.jsx)(d.A,{p:2,children:(0,k.jsxs)(g.A,{variant:"h6",children:["Loan Number: ",e.loanNumber]})}),(0,k.jsx)(d.A,{px:2,children:(0,k.jsx)(B.A,{children:e.statusHistory.map(((i,n)=>(0,k.jsxs)(L.A,{children:[(0,k.jsxs)(E.A,{children:[(0,k.jsx)(I.A,{color:"fullyPaid"===i.status?"success":"denied"===i.status?"error":"primary",children:(0,k.jsx)(_.A,{})}),n<e.statusHistory.length-1&&(0,k.jsx)(R.A,{})]}),(0,k.jsxs)(O.A,{children:[(0,k.jsxs)(g.A,{variant:"body1",color:"textPrimary",children:["Status: ",i.status]}),(0,k.jsxs)(g.A,{variant:"body2",color:"textSecondary",children:["Changed On: ",new Date(i.changedOn).toLocaleString()]})]})]},n)))})})]},i)))}):(0,k.jsx)(g.A,{children:"No loans found for this borrower."})};var H=e=>{let{data:i,onEdit:n}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Business Details"}),(0,k.jsx)(w.A,{onClick:n,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Business Name"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==i&&void 0!==i&&i.businessName?null===i||void 0===i?void 0:i.businessName:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Business Type "}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.businessType)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Industry Type"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.industryType)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Annual TurnOver"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===i||void 0===i?void 0:i.annualTurnOver)||"--"})]})]})]})})};var X=e=>{var i;let{data:n,onEdit:l}=e;return(0,k.jsx)(f.A,{children:(0,k.jsxs)(d.A,{p:3,children:[(0,k.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,k.jsx)(g.A,{variant:"h5",children:"Bank Details"}),(0,k.jsx)(w.A,{onClick:l,sx:{color:"blue"},"aria-label":"edit",children:(0,k.jsx)(C.A,{})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,style:{marginTop:"3px"},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Account Holder"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:null!==n&&void 0!==n&&n.accountHolder?null===n||void 0===n?void 0:n.accountHolder:"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Account Type"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===n||void 0===n?void 0:n.accountType)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Account Number"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===n||void 0===n?void 0:n.accountNumber)||"--"})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:6,children:[(0,k.jsx)(g.A,{variant:"body1",children:"Statement File"}),(0,k.jsx)(g.A,{variant:"body2",color:N.A.grey[600],children:(null===n||void 0===n||null===(i=n.bankStatement)||void 0===i?void 0:i.fileName)||"--"})]})]})]})})},W=n(55035),V=n(73062);var q=()=>{const e=(0,m.g)(),[i,n]=(0,y.useState)([]);(0,y.useEffect)((()=>{(async()=>{const i=await(0,$.x4)(`borrower/loan/${e.id}`);var l;i&&200===i.status&&n(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.loans)})()}),[]);const r=[{field:"_id",headerName:"S.No.",flex:.5,valueGetter:e=>e.api.getRowIndexRelativeToVisibleRows(e.row._id)+1},{field:"loanNumber",headerName:"Loan Number",flex:1},{field:"principleAmount",headerName:"Loan Amount",flex:1},{field:"repaymentAmount",headerName:"Repayment Amount",flex:1},{field:"lender",headerName:"Lender",flex:1,renderCell:e=>{var i,n,l,r;return(0,k.jsx)(g.A,{children:null!==e&&void 0!==e&&null!==(i=e.row)&&void 0!==i&&null!==(n=i.landers)&&void 0!==n&&n.landersName?null===e||void 0===e||null===(l=e.row)||void 0===l||null===(r=l.landers)||void 0===r?void 0:r.landersName:"--"})}},{field:"releaseDate",headerName:"Disbursal Date",flex:1},{field:"loanStatus",headerName:"Status",flex:1}];return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(l.A,{children:(0,k.jsx)(d.A,{width:"100%",children:(0,k.jsx)(f.A,{style:{height:"600px",paddingTop:"15px"},children:(0,k.jsx)(W.zh,{rows:null!==i&&void 0!==i?i:[],columns:r,getRowId:e=>e._id,slots:{toolbar:V.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})})})};var G=()=>{const e=(0,m.g)(),[i,n]=(0,y.useState)([]);(0,y.useEffect)((()=>{(async()=>{const i=await(0,$.x4)(`borrower/loanOffers/${e.id}`);var l;i&&200===i.status&&n(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.loanOffers)})()}),[]);const r=[{field:"_id",headerName:"S.No.",flex:.5,valueGetter:e=>e.api.getRowIndexRelativeToVisibleRows(e.row._id)+1},{field:"loanNumber",headerName:"Loan Number",flex:1},{field:"loanType",headerName:"Loan Type",flex:1},{field:"offerName",headerName:"Offer Name",flex:1},{field:"interestRate",headerName:"Interest Rate",flex:1,renderCell:e=>{var i;return(0,k.jsx)(g.A,{children:`${null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.interestRate} %`})}},{field:"status",headerName:"Status",flex:1}];return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(l.A,{children:(0,k.jsx)(d.A,{width:"100%",children:(0,k.jsx)(f.A,{style:{height:"600px",paddingTop:"15px"},children:(0,k.jsx)(W.zh,{rows:null!==i&&void 0!==i?i:[],columns:r,getRowId:e=>e._id,slots:{toolbar:V.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})})})},M=n(48875),Y=n(7762),Q=n(43939),U=n(60666),Z=n(29277),J=n(27232);var K=e=>{var i;const{open:n,handleClose:l,addBorrowersDocuments:s,editBorrowerDocumentData:d,editBorrowerDocumentDetails:o,setEditBorrowerDocumentData:c}=e,y=localStorage.getItem("user_id"),m=U.Ik({file:U.Yj().required("File is required"),fileName:U.Yj().required("File Name is required")}),j=new File([""],null===d||void 0===d||null===(i=d.file)||void 0===i?void 0:i.name),p={fileName:d?d.fileName:"",file:d?j:"",createdBy:y},b=(0,Q.Wx)({initialValues:p,validationSchema:m,enableReinitialize:!0,onSubmit:async e=>{d?o(e):s(e),l(),b.resetForm(),c(""),J.oR.success(t("Documents Upload Successfully"))}});return(0,k.jsx)("div",{children:(0,k.jsxs)(u.A,{open:n,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,k.jsxs)(x.A,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(g.A,{variant:"h6",children:[" ",d?"Edit Borrowers Documents":"Add Borrowers Documents"]}),(0,k.jsx)(g.A,{children:(0,k.jsx)(Y.A,{onClick:l,style:{cursor:"pointer"}})})]}),(0,k.jsx)(h.A,{dividers:!0,children:(0,k.jsx)("form",{encType:"multipart/form-data",children:(0,k.jsxs)(r.Ay,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:[(0,k.jsxs)(r.Ay,{item:!0,xs:12,sm:12,md:12,children:[(0,k.jsx)(Z.A,{children:"fileName"}),(0,k.jsx)(v.A,{id:"fileName",name:"fileName",size:"small",fullWidth:!0,value:b.values.fileName,onChange:b.handleChange,error:b.touched.fileName&&Boolean(b.errors.fileName),helperText:b.touched.fileName&&b.errors.fileName})]}),(0,k.jsxs)(r.Ay,{item:!0,xs:12,sm:12,md:12,children:[(0,k.jsx)(Z.A,{children:"uploadFile"}),(0,k.jsx)(v.A,{id:"file",name:"file",size:"small",maxRows:10,fullWidth:!0,type:"file",multiple:!0,InputLabelProps:{shrink:!0},onChange:e=>{b.setFieldValue("file",e.currentTarget.files[0])},error:b.touched.file&&Boolean(b.errors.file),helperText:b.touched.file&&b.errors.file?b.errors.file:b.values.file&&b.values.file.name?(0,k.jsxs)(g.A,{style:{fontWeight:"bold",color:"#007bff"},children:["Selected file: ",b.values.file.name]}):"No file selected"})]})]})})}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(a.A,{type:"submit",variant:"contained",onClick:b.handleSubmit,style:{textTransform:"capitalize"},children:"Save"}),(0,k.jsx)(a.A,{type:"reset",variant:"outlined",style:{textTransform:"capitalize"},color:"error",onClick:()=>{b.resetForm(),l(),c("")},children:"Cancel"})]})]})})},ee=n(57988),ie=n(20660);var ne=()=>{const e=(0,m.g)(),[i,n]=(0,y.useState)(!1),[r,s]=(0,y.useState)(!1),[t,o]=(0,y.useState)(!1),[c,u]=(0,y.useState)(""),[x,h]=(0,y.useState)(""),v=()=>n(!0),A=()=>s(!1),j=async()=>{const i=await(0,$.x4)(`borrower/documentsList/${e.id}`);var n;i&&200===i.status&&o(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.documents)};(0,y.useEffect)((()=>{j()}),[]);const p=[{field:"_id",headerName:"S.No.",flex:.5,valueGetter:e=>e.api.getRowIndexRelativeToVisibleRows(e.row._id)+1},{field:"fileName",headerName:"Documents Name",flex:1,cellClassName:"name-column--cell name-column--cell--capitalize"},{field:"file",headerName:"Documents file",flex:1,renderCell:e=>{var i,n;const l=null===e||void 0===e||null===(i=e.row)||void 0===i||null===(n=i.file)||void 0===n?void 0:n.name,r=`https://localhost:4000/uploads/borrowersDocuments/${l}`;return l?(0,k.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"name-column--cell--link",children:l}):null}},{field:"action",headerName:"action",flex:1,renderCell:e=>{const i=async e=>{u(e._id),s(!0)};return(0,k.jsxs)(d.A,{children:[(0,k.jsx)(w.A,{fontSize:"40px",color:"primary",onClick:()=>{(async e=>{h(e),v()})(null===e||void 0===e?void 0:e.row)},children:(0,k.jsx)(C.A,{})}),(0,k.jsx)(w.A,{color:"error",onClick:()=>{i(null===e||void 0===e?void 0:e.row)},children:(0,k.jsx)(ee.A,{})})]})}}];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ie.A,{openDelete:r,handleCloseDelete:A,deleteData:async e=>{const i=await(0,$.Gx)(`borrower/documentsDelete/${e}`,e);i&&200===i.status&&j(),A()},deleteId:c}),(0,k.jsx)(K,{open:i,handleClose:()=>n(!1),addBorrowersDocuments:async i=>{const n=new FormData;n.append("file",i.file),n.append("fileName",i.fileName),n.append("createdBy",i.createdBy);const l=await(0,$.d_)(`borrower/documents/${e.id}`,n);l&&201===l.status&&j()},editBorrowerDocumentData:x,editBorrowerDocumentDetails:async e=>{const i=new FormData;i.append("file",e.file),i.append("fileName",e.fileName),i.append("createdBy",e.createdBy);const n=await(0,$.X4)(`borrower/documentsEdit/${x._id}`,i);n&&200===n.status&&j()},setEditBorrowerDocumentData:h}),(0,k.jsx)(l.A,{children:(0,k.jsx)(d.A,{width:"100%",children:(0,k.jsx)(f.A,{style:{height:"600px",paddingTop:"15px"},children:(0,k.jsx)(W.zh,{rows:null!==t&&void 0!==t?t:[],columns:p,getRowId:e=>e._id,slots:{toolbar:function(e){let{handleOpenAdd:i}=e;return(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px"},children:[(0,k.jsx)(V.O,{}),(0,k.jsx)(a.A,{variant:"contained",startIcon:(0,k.jsx)(M.A,{icon:"eva:plus-fill"}),onClick:i,children:"Add Documents"})]})}},slotProps:{toolbar:{handleOpenAdd:v}}})})})})]})};var le=()=>{const e=(0,m.g)(),i=(0,m.Zp)(),[n,t]=(0,y.useState)(0),[f,g]=(0,y.useState)([]),[w,N]=(0,y.useState)(!1),[C,B]=(0,y.useState)(""),[L,E]=(0,y.useState)([]);(0,y.useEffect)((()=>{(async()=>{const i=await(0,$.x4)(`borrower/view/${e.id}`);var n;i&&200===i.status&&g(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.borrowerDetails)})()}),[]);const I=(e,i)=>{B(e),E(i),N(!0)};return(0,k.jsxs)("div",{children:[(0,k.jsxs)(l.A,{children:[(0,k.jsx)(r.Ay,{container:!0,display:"flex",alignItems:"center",children:(0,k.jsxs)(s.A,{direction:"row",alignItems:"center",mb:3,justifyContent:"space-between",width:"100%",children:[(0,k.jsx)(j.A,{title:"Borrowers Details",subtitle:"Borrowers Data"}),(0,k.jsx)(s.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,k.jsx)(a.A,{variant:"contained",color:"primary",onClick:()=>{i("/customers/borrowers")},startIcon:(0,k.jsx)(b.A,{}),children:"Back"})})]})}),(0,k.jsxs)(d.A,{sx:{width:"100%"},children:[(0,k.jsx)(d.A,{sx:{borderBottom:1,borderColor:"divider",marginBottom:"0px"},children:(0,k.jsxs)(o.A,{value:n,onChange:(e,i)=>t(i),"aria-label":"basic tabs example",children:[(0,k.jsx)(c.A,{label:"Personal Details",...(0,p.L)(0)}),(0,k.jsx)(c.A,{label:"Activity",...(0,p.L)(1)}),(0,k.jsx)(c.A,{label:"Business Details",...(0,p.L)(2)}),(0,k.jsx)(c.A,{label:"Loans",...(0,p.L)(3)}),(0,k.jsx)(c.A,{label:"Loan Offers",...(0,p.L)(4)}),(0,k.jsx)(c.A,{label:"Documents",...(0,p.L)(5)})]})}),(0,k.jsx)(p.d,{value:n,index:0,children:(0,k.jsxs)(d.A,{py:2,children:[(0,k.jsxs)(r.Ay,{container:!0,spacing:2,py:2,children:[(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(D,{data:f,onEdit:()=>I("Edit Personal Details",[{label:"First Name",value:(null===f||void 0===f?void 0:f.firstName)||"",key:"firstName"},{label:"Middle Name",value:(null===f||void 0===f?void 0:f.middleName)||"",key:"middleName"},{label:"Last Name",value:(null===f||void 0===f?void 0:f.lastName)||"",key:"lastName"},{label:"Email Id",value:(null===f||void 0===f?void 0:f.emailID)||"",key:"emailID"},{label:"Occupation Type",value:(null===f||void 0===f?void 0:f.occupationType)||"",key:"occupationType"}])})}),(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(F,{data:f,onEdit:()=>I("Edit Permanent Details",[{label:"Address Line1",value:(null===f||void 0===f?void 0:f.addressLine1)||"",key:"addressLine1"},{label:"Address Line2",value:(null===f||void 0===f?void 0:f.addressLine2)||"",key:"addressLine2"},{label:"Ownership Type",value:(null===f||void 0===f?void 0:f.ownerShipType)||"",key:"ownerShipType"},{label:"Pin Code",value:(null===f||void 0===f?void 0:f.pinCode)||"",key:"pinCode"}])})})]}),(0,k.jsxs)(r.Ay,{container:!0,spacing:2,py:2,children:[(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(S,{data:f,onEdit:()=>I("Edit Residence Details",[{label:"Residence Address Line1",value:(null===f||void 0===f?void 0:f.residenceAddressLine1)||"",key:"residenceAddressLine1"},{label:"Residence Address Line2",value:(null===f||void 0===f?void 0:f.residenceAddressLine2)||"",key:"residenceAddressLine2"},{label:"Residence Ownership Type",value:(null===f||void 0===f?void 0:f.residenceOwnerShipType)||"",key:"residenceOwnerShipType"},{label:"Residence Pin Code",value:(null===f||void 0===f?void 0:f.residencePinCode)||"",key:"residencePinCode"}])})}),(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(T,{data:f,onEdit:()=>I("Personal Document Details",[{label:"Aadhaar Number",value:(null===f||void 0===f?void 0:f.aadhaarNumber)||"",key:"aadhaarNumber"},{label:"Pan Number",value:(null===f||void 0===f?void 0:f.panNumber)||"",key:"panNumber"},{label:"Contact NO.",value:(null===f||void 0===f?void 0:f.phoneNumber)||"",key:"phoneNumber"}])})})]})]})}),(0,k.jsx)(p.d,{value:n,index:1,children:(0,k.jsx)(d.A,{py:2,children:(0,k.jsx)(z,{data:f})})}),(0,k.jsx)(p.d,{value:n,index:2,children:(0,k.jsx)(d.A,{py:2,children:(0,k.jsxs)(r.Ay,{container:!0,spacing:2,py:2,children:[(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(H,{data:f,onEdit:()=>I("Business Details",[{label:"Business Name",value:(null===f||void 0===f?void 0:f.businessName)||"",key:"businessName"},{label:"Business Type",value:(null===f||void 0===f?void 0:f.businessType)||"",key:"businessType"},{label:"Industry Type",value:(null===f||void 0===f?void 0:f.industryType)||"",key:"industryType"},{label:"Annual Turnover",value:(null===f||void 0===f?void 0:f.annualTurnOver)||"",key:"annualTurnOver"}])})}),(0,k.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(X,{data:f,onEdit:()=>{var e;return I("Bank Details",[{label:"Account Holder",value:(null===f||void 0===f?void 0:f.accountHolder)||"",key:"accountHolder"},{label:"Account Type",value:(null===f||void 0===f?void 0:f.accountType)||"",key:"accountType"},{label:"Account Number",value:(null===f||void 0===f?void 0:f.accountNumber)||"",key:"accountNumber"},{label:"Statement File",value:(null===f||void 0===f||null===(e=f.bankStatement)||void 0===e?void 0:e.fileName)||"",key:"fileName"}])}})})]})})}),(0,k.jsx)(p.d,{value:n,index:3,children:(0,k.jsx)(d.A,{py:3,children:(0,k.jsx)(q,{data:f})})}),(0,k.jsx)(p.d,{value:n,index:4,children:(0,k.jsx)(d.A,{py:3,children:(0,k.jsx)(G,{data:f})})}),(0,k.jsx)(p.d,{value:n,index:5,children:(0,k.jsx)(d.A,{py:3,children:(0,k.jsx)(ne,{data:f})})})]})]}),(0,k.jsxs)(u.A,{open:w,onClose:()=>N(!1),children:[(0,k.jsx)(x.A,{children:C}),(0,k.jsx)(h.A,{children:L.map(((e,i)=>(0,k.jsx)(v.A,{margin:"dense",label:e.label,fullWidth:!0,value:e.value,onChange:e=>{const n=[...L];n[i].value=e.target.value,E(n)}},i)))}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(a.A,{onClick:()=>N(!1),color:"secondary",children:"Cancel"}),(0,k.jsx)(a.A,{onClick:async()=>{const i=L.reduce(((e,i)=>(e[i.key]=i.value,e)),{});try{const n=await(0,$.X4)(`borrower/edit/${e.id}`,i);200===n.status?(g({...f,...i}),N(!1)):console.error("Error updating borrower details:",n)}catch(n){console.error("Failed to save updates:",n)}},color:"primary",children:"Save"})]})]})]})}}}]);