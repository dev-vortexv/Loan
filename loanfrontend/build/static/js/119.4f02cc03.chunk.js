"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[119],{20660:function(e,r,i){i.d(r,{A:function(){return x}});i(9950);var n=i(10226),a=i(59254),l=i(63464),t=i(40033),s=i(28170),d=i(79739),o=i(25333),c=i(96319),u=i(82053),m=i(93230),h=i(44414);const p=(0,a.Ay)(l.A)((e=>{let{theme:r}=e;return{"& .MuiDialogContent-root":{padding:r.spacing(2)},"& .MuiDialogActions-root":{padding:r.spacing(1)}}}));function A(e){const{children:r,onClose:i,...n}=e;return(0,h.jsxs)(t.A,{sx:{m:0,p:2},...n,children:[r,i?(0,h.jsx)(o.A,{"aria-label":"close",onClick:i,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,h.jsx)(c.A,{})}):null]})}function x(e){const{openDelete:r,handleCloseDelete:i,deleteData:a,deleteId:l}=e;return(0,h.jsx)("div",{children:(0,h.jsxs)(p,{"aria-labelledby":"customized-dialog-title",open:r,children:[(0,h.jsx)(A,{id:"customized-dialog-title",onClose:i,children:"Delete"}),(0,h.jsx)(s.A,{dividers:!0,children:(0,h.jsx)(u.A,{gutterBottom:!0,p:3,children:"Are you sure you want to delete this item?"})}),(0,h.jsx)(d.A,{children:(0,h.jsxs)(m.A,{direction:"row",spacing:2,children:[(0,h.jsx)(n.A,{variant:"contained",color:"error",onClick:()=>{a(l)},children:"Yes"}),(0,h.jsx)(n.A,{variant:"contained",onClick:i,children:"No"})]})})]})})}},35777:function(e,r,i){var n=i(59254),a=i(13048);const l=(0,n.Ay)("div")({"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{borderBottom:"none"},"& .name-column--cell":{color:a.A.primary.main,cursor:"pointer"},"& .name-column--cell--capitalize":{textTransform:"capitalize"},"& .name-column--cell:hover":{textDecoration:"underline"},"& .MuiDataGrid-columnHeaders":{backgroundColor:a.A.grey[200],borderBottom:"none",outline:"none !important",borderRadius:"0px"},"& .MuiDataGrid-virtualScroller":{scrollbarWidth:"1px"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{textTransform:"capitalize",fontSize:"15px"},".MuiDataGrid-cell:focus,.MuiDataGrid-columnHeader:focus,MuiDataGrid-columnHeaderCheckbox:focus":{outline:"none !important"},".css-1jiby6q-MuiDataGrid-root .MuiDataGrid-columnHeader:focus-within, .css-1jiby6q-MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"}});r.A=l},13048:function(e,r,i){var n=i(97497);const a={0:"#FFFFFF",100:"#F9FAFB",200:"#F4F6F8",300:"#DFE3E8",400:"#C4CDD5",500:"#919EAB",600:"#637381",700:"#454F5B",800:"#212B36",900:"#161C24"},l={common:{black:"#000",white:"#fff"},primary:{lighter:"#D1E9FC",light:"#76B0F1",main:"#2065D1",dark:"#103996",darker:"#061B64",contrastText:"#fff"},secondary:{lighter:"#D6E4FF",light:"#84A9FF",main:"#3366FF",dark:"#1939B7",darker:"#091A7A",contrastText:"#fff"},info:{lighter:"#D0F2FF",light:"#74CAFF",main:"#1890FF",dark:"#0C53B7",darker:"#04297A",contrastText:"#fff"},success:{lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D",contrastText:a[800]},warning:{lighter:"#FFF7CD",light:"#FFE16A",main:"#FFC107",dark:"#B78103",darker:"#7A4F01",contrastText:a[800]},error:{lighter:"#FFE7D9",light:"#FFA48D",main:"#FF4842",dark:"#B72136",darker:"#7A0C2E",contrastText:"#fff"},grey:a,divider:(0,n.X4)(a[500],.24),text:{primary:a[800],secondary:a[600],disabled:a[500]},background:{paper:"#fff",default:a[100],neutral:a[200]},action:{active:a[600],hover:(0,n.X4)(a[500],.08),selected:(0,n.X4)(a[500],.16),disabled:(0,n.X4)(a[500],.8),disabledBackground:(0,n.X4)(a[500],.24),focus:(0,n.X4)(a[500],.24),hoverOpacity:.08,disabledOpacity:.48}};r.A=l},48875:function(e,r,i){i.d(r,{A:function(){return c}});var n=i(11942),a=i.n(n),l=i(9950),t=i(14650),s=i(16491),d=i(44414);const o=(0,l.forwardRef)(((e,r)=>{let{icon:i,width:n=20,sx:a,...l}=e;return(0,d.jsx)(s.A,{ref:r,component:t.In,icon:i,sx:{width:n,height:n,...a},...l})}));o.propTypes={sx:a().object,width:a().oneOfType([a().number,a().string]),icon:a().oneOfType([a().element,a().string])};var c=o},25119:function(e,r,i){i.r(r),i.d(r,{default:function(){return W}});var n=i(9950),a=i(16491),l=i(82053),t=i(10226),s=i(25333),d=i(19808),o=i(93230),c=i(48089),u=i(55035),m=i(73062),h=i(7999),p=i(57988),A=i(35777),x=i(8145),f=i(19647),b=i(23266),g=i(16497),j=i(93038),F=i(71525),v=i(58535),y=i(43754),N=i(37885),w=i(7762),D=i(43939),S=i(60666),C=i(44414);var T=e=>{var r;let{drawerOpen:i,handleCloseDrawer:s,AddBorrowerDetails:d,editBorrowerData:o,EditBorrowerDetails:c,setEditBorrowerData:u}=e;const m=localStorage.getItem("user_id"),[h,p]=(0,n.useState)(0),A=S.Ik({firstName:S.Yj().required("First Name is required"),middleName:S.Yj(),lastName:S.Yj().required("Last Name is required"),dateOfBirth:S.Yj().required("Date of Birth is required"),gender:S.Yj().required("Gender is required"),fatherName:S.Yj().required("Father Name is required"),emailID:S.Yj().email("Invalid email").required("Email ID is required"),phoneNumber:S.Yj().required("Phone Number is required").matches(/^[0-9]{10}$/,"Phone number must be 10 digits"),occupationType:S.Yj().required("Occupation Type is required"),panNumber:S.Yj().required("PAN Number is required").matches(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Invalid PAN format"),aadhaarNumber:S.Yj().required("Aadhaar Number is required").matches(/^[0-9]{12}$/,"Aadhaar must be 12 digits")}),T={firstName:o?o.firstName:"",middleName:o?o.middleName:"",lastName:o?o.lastName:"",dateOfBirth:o?o.dateOfBirth:"",gender:o?o.gender:"",emailID:o?o.emailID:"",phoneNumber:o?o.phoneNumber:"",fatherName:o?o.fatherName:"",occupationType:o?o.occupationType:"",panNumber:o?o.panNumber:"",aadhaarNumber:o?o.aadhaarNumber:"",addressLine1:o?o.addressLine1:"",addressLine2:o?o.addressLine2:"",pinCode:o?o.pinCode:0,residingSince:o?o.residingSince:"",ownerShipType:o?o.ownerShipType:"",residenceAddressLine1:o?o.residenceAddressLine1:"",residenceAddressLine2:o?o.residenceAddressLine2:"",residencePinCode:o?o.residencePinCode:0,residenceResidingSince:o?o.residenceResidingSince:"",residenceOwnerShipType:o?o.residenceOwnerShipType:"",businessName:o?o.businessName:"",annualTurnOver:o?o.annualTurnOver:"",industryType:o?o.industryType:"",businessType:o?o.businessType:"",accountType:o?o.accountType:0,accountHolder:o?o.accountHolder:"",accountNumber:o?o.accountNumber:0,ifsc:o?o.ifsc:"",bankStatement:null,sameAsPermanentAddress:!!o&&o.sameAsPermanentAddress,createdBy:m},P=(0,D.Wx)({initialValues:T,validationSchema:A,enableReinitialize:!0,onSubmit:async e=>{const r=new FormData;Object.keys(e).forEach((i=>{"bankStatement"===i&&e[i],r.append(i,e[i])})),o?await c(r):await d(r),s(),P.resetForm(),p(0),u("")}});(0,n.useEffect)((()=>{P.values.sameAsPermanentAddress?(P.setFieldValue("residenceAddressLine1",P.values.addressLine1),P.setFieldValue("residenceAddressLine2",P.values.addressLine2),P.setFieldValue("residencePinCode",P.values.pinCode),P.setFieldValue("residenceResidingSince",P.values.residingSince),P.setFieldValue("residenceOwnerShipType",P.values.ownerShipType)):(P.setFieldValue("residenceAddressLine1",""),P.setFieldValue("residenceAddressLine2",""),P.setFieldValue("residencePinCode",""),P.setFieldValue("residenceResidingSince",""),P.setFieldValue("residenceOwnerShipType",""))}),[P.values.sameAsPermanentAddress]),(0,n.useEffect)((()=>{if(null!==o&&void 0!==o&&o.bankStatement&&"object"===typeof o.bankStatement){const e=new File([""],null===o||void 0===o?void 0:o.bankStatement.fileName);P.setFieldValue("bankStatement",e)}}),[o.bankStatement]);const k=[{id:1,label:"Personal Details",content:()=>(0,C.jsxs)(a.A,{children:[(0,C.jsx)(x.A,{label:"First Name",fullWidth:!0,margin:"normal",...P.getFieldProps("firstName"),error:P.touched.firstName&&Boolean(P.errors.firstName),helperText:P.touched.firstName&&P.errors.firstName}),(0,C.jsx)(x.A,{label:"Middle Name",fullWidth:!0,margin:"normal",...P.getFieldProps("middleName")}),(0,C.jsx)(x.A,{label:"Last Name",fullWidth:!0,margin:"normal",...P.getFieldProps("lastName"),error:P.touched.lastName&&Boolean(P.errors.lastName),helperText:P.touched.lastName&&P.errors.lastName}),(0,C.jsx)(f.A,{htmlFor:"outlined-adornment-password",children:"Date Of Birth"}),(0,C.jsx)(x.A,{name:"dateOfBirth",type:"date",fullWidth:!0,...P.getFieldProps("dateOfBirth"),error:P.touched.dateOfBirth&&Boolean(P.errors.dateOfBirth),helperText:P.touched.dateOfBirth&&P.errors.dateOfBirth}),(0,C.jsxs)(x.A,{label:"Gender",select:!0,fullWidth:!0,margin:"normal",...P.getFieldProps("gender"),error:P.touched.gender&&Boolean(P.errors.gender),helperText:P.touched.gender&&P.errors.gender,children:[(0,C.jsx)(b.A,{value:"male",children:"Male"}),(0,C.jsx)(b.A,{value:"Female",children:"Female"})]}),(0,C.jsx)(x.A,{label:"Father`s Name",fullWidth:!0,margin:"normal",...P.getFieldProps("fatherName"),error:P.touched.fatherName&&Boolean(P.errors.fatherName),helperText:P.touched.fatherName&&P.errors.fatherName}),(0,C.jsx)(x.A,{label:"Email ID",fullWidth:!0,margin:"normal",...P.getFieldProps("emailID"),error:P.touched.emailID&&Boolean(P.errors.emailID),helperText:P.touched.emailID&&P.errors.emailID}),(0,C.jsx)(x.A,{label:"Phone Number",type:"number",fullWidth:!0,margin:"normal",...P.getFieldProps("phoneNumber"),error:P.touched.phoneNumber&&Boolean(P.errors.phoneNumber),helperText:P.touched.phoneNumber&&P.errors.phoneNumber}),(0,C.jsxs)(x.A,{label:"Occupation Type",select:!0,fullWidth:!0,margin:"normal",...P.getFieldProps("occupationType"),error:P.touched.occupationType&&Boolean(P.errors.occupationType),helperText:P.touched.occupationType&&P.errors.occupationType,children:[(0,C.jsx)(b.A,{value:"Salaried",children:"Salaried"}),(0,C.jsx)(b.A,{value:"Self Employed",children:"Self Employed"}),(0,C.jsx)(b.A,{value:"Retired",children:"Retired"}),(0,C.jsx)(b.A,{value:"Housewife",children:"Housewife"}),(0,C.jsx)(b.A,{value:"Student",children:"Student"})]}),(0,C.jsx)(x.A,{label:"Aadhaar Number",fullWidth:!0,type:"number",margin:"normal",...P.getFieldProps("aadhaarNumber"),error:P.touched.aadhaarNumber&&Boolean(P.errors.aadhaarNumber),helperText:P.touched.aadhaarNumber&&P.errors.aadhaarNumber})]})},{id:2,label:"Permanent Address",content:()=>(0,C.jsxs)(a.A,{children:[(0,C.jsx)(x.A,{label:"Address Line 1",fullWidth:!0,margin:"normal",...P.getFieldProps("addressLine1")}),(0,C.jsx)(x.A,{label:"Address Line 2",fullWidth:!0,margin:"normal",...P.getFieldProps("addressLine2")}),(0,C.jsx)(x.A,{label:"Pin Code",type:"number",fullWidth:!0,margin:"normal",...P.getFieldProps("pinCode")}),(0,C.jsx)(x.A,{label:"Residing Since",fullWidth:!0,margin:"normal",...P.getFieldProps("residingSince")}),(0,C.jsxs)(x.A,{label:"OwnerShip Type",select:!0,fullWidth:!0,margin:"normal",...P.getFieldProps("ownerShipType"),children:[(0,C.jsx)(b.A,{value:"Owned",children:"Owned"}),(0,C.jsx)(b.A,{value:"Family",children:"Family"}),(0,C.jsx)(b.A,{value:"Rented",children:"Rented"})]})]})},{id:3,label:"Residence Address",content:()=>(0,C.jsxs)(a.A,{children:[(0,C.jsx)(g.A,{control:(0,C.jsx)(j.A,{checked:P.values.sameAsPermanentAddress,...P.getFieldProps("sameAsPermanentAddress")}),label:"Same as Permanent Address",sx:{paddingTop:"20px"}}),(0,C.jsx)(x.A,{label:"Address Line 1",fullWidth:!0,margin:"normal",...P.getFieldProps("residenceAddressLine1")}),(0,C.jsx)(x.A,{label:"Address Line 2",fullWidth:!0,margin:"normal",...P.getFieldProps("residenceAddressLine2")}),(0,C.jsx)(x.A,{label:"Pin Code",fullWidth:!0,type:"number",margin:"normal",...P.getFieldProps("residencePinCode")}),(0,C.jsx)(x.A,{label:"Residing Since",fullWidth:!0,margin:"normal",...P.getFieldProps("residenceResidingSince")}),(0,C.jsxs)(x.A,{label:"OwnerShip Type",select:!0,fullWidth:!0,margin:"normal",...P.getFieldProps("residenceOwnerShipType"),children:[(0,C.jsx)(b.A,{value:"Owned",children:"Owned"}),(0,C.jsx)(b.A,{value:"Family",children:"Family"}),(0,C.jsx)(b.A,{value:"Rented",children:"Rented"})]})]})},{id:4,label:"Business Details",content:()=>(0,C.jsxs)(a.A,{children:[(0,C.jsx)(x.A,{label:"Business Name",fullWidth:!0,margin:"normal",...P.getFieldProps("businessName")}),(0,C.jsx)(x.A,{label:"Annual TurnOver (IN lakh)",type:"number",fullWidth:!0,margin:"normal",...P.getFieldProps("annualTurnOver")}),(0,C.jsx)(x.A,{label:"Industry Type",fullWidth:!0,margin:"normal",...P.getFieldProps("industryType")}),(0,C.jsx)(x.A,{label:"Business Type",fullWidth:!0,margin:"normal",...P.getFieldProps("businessType")})]})},{id:5,label:"Bank Details",content:()=>{var e,r;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.A,{label:"PAN Number",fullWidth:!0,margin:"normal",...P.getFieldProps("panNumber"),error:P.touched.panNumber&&Boolean(P.errors.panNumber),helperText:P.touched.panNumber&&P.errors.panNumber}),(0,C.jsxs)(x.A,{label:"Account Type",select:!0,fullWidth:!0,margin:"normal",...P.getFieldProps("accountType"),children:[(0,C.jsx)(b.A,{value:"Saving",children:"Saving"}),(0,C.jsx)(b.A,{value:"Current",children:"Current"})]}),(0,C.jsx)(x.A,{label:"Account Holder Name",fullWidth:!0,margin:"normal",...P.getFieldProps("accountHolder")}),(0,C.jsx)(x.A,{label:"Account Number",fullWidth:!0,type:"number",margin:"normal",...P.getFieldProps("accountNumber")}),(0,C.jsx)(x.A,{label:"IFSC",fullWidth:!0,margin:"normal",...P.getFieldProps("ifsc")}),(0,C.jsx)(f.A,{htmlFor:"outlined-adornment-password",children:"6 Month Statement"}),(0,C.jsx)(x.A,{type:"file",fullWidth:!0,onChange:e=>{const r=e.currentTarget.files[0];P.setFieldValue("bankStatement",r)},accept:"image/*,application/pdf",style:{color:"blue",cursor:"pointer"}}),(null===o||void 0===o||null===(e=o.bankStatement)||void 0===e?void 0:e.fileName)&&(0,C.jsxs)(l.A,{sx:{color:"blue",textAlign:"center",paddingTop:"5px"},children:["File Name :- ",null===o||void 0===o||null===(r=o.bankStatement)||void 0===r?void 0:r.fileName]})]})}}];return(0,C.jsx)("div",{children:(0,C.jsx)(F.Ay,{anchor:"right",open:i,PaperProps:{style:{width:"420px"}},children:(0,C.jsx)("form",{onSubmit:P.handleSubmit,children:(0,C.jsxs)(a.A,{p:3,children:[(0,C.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,C.jsx)("h3",{children:null===(r=k[h])||void 0===r?void 0:r.label}),(0,C.jsx)(w.A,{style:{cursor:"pointer"},onClick:()=>{s(),P.resetForm(),p(0),u("")}})]}),(0,C.jsx)(v.A,{activeStep:h,alternativeLabel:!0,children:null===k||void 0===k?void 0:k.map((e=>(0,C.jsx)(y.A,{children:(0,C.jsx)(N.A,{})},e.id)))}),k[h].content((e=>r=>{const i="bankStatement"===e?r.target.files[0]:r.target.value;P.setFieldValue(e,i)})),(0,C.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[h===k.length-1?(0,C.jsx)(t.A,{variant:"contained",onClick:()=>p(0),children:"Reset"}):(0,C.jsx)(t.A,{variant:"contained",color:"secondary",disabled:0===h,onClick:()=>{p((e=>e-1))},children:"Back"}),(0,C.jsx)(t.A,{variant:"contained",onClick:()=>{p((e=>e+1))},style:{display:h===k.length-1?"none":"inline-block"},children:"Next"}),(0,C.jsx)(t.A,{variant:"contained",color:"secondary",type:"submit",style:{display:h===k.length-1?"inline-block":"none"},children:"Save"})]})]})})})})},P=i(27702),k=i(20660),B=i(13564),O=i(48875);var W=()=>{const e=localStorage.getItem("user_id"),r=(0,B.Zp)(),[i,x]=(0,n.useState)([]),[f,b]=(0,n.useState)(),[g,j]=(0,n.useState)(),[F,v]=(0,n.useState)(""),[y,N]=(0,n.useState)(!1),[w,D]=(0,n.useState)(!1),S=()=>N(!1),W=()=>D(!0),I=async()=>{const r=await(0,P.x4)(`borrower/list?createdBy=${e}`);r&&200===r.status&&x(r.data.borrowerAllData)};(0,n.useEffect)((()=>{I()}),[]);const L=[{field:"_id",headerName:"S.No.",flex:.5,width:40,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:e=>e.api.getAllRowIds().indexOf(e.id)+1},{field:"fullName",headerName:"Full Name",width:150,flex:1,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:e=>{var i,n;return(0,C.jsx)(a.A,{onClick:()=>{var i;const n=null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i._id;r(`/customers/borrowers/View/${n}`)},style:{cursor:"pointer"},children:(0,C.jsx)(l.A,{children:`${null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.firstName} ${null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.lastName}`})})}},{field:"emailID",headerName:"Email ID",flex:1,renderCell:e=>{var r,i;return(0,C.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)(l.A,{children:null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.emailID}),(0,C.jsx)(l.A,{children:null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.status})]})}},{field:"phoneNumber",headerName:"Contact No.",flex:1},{field:"verification",headerName:"Verification",flex:1,renderCell:e=>{const r=async e=>{j(e._id),(async e=>{const r={...e,status:"verified"},i=await(0,P.X4)(`borrower/edit/${g}`,r);i&&200===i.status&&I()})(e)};return(0,C.jsx)(a.A,{children:(0,C.jsx)(t.A,{variant:"contained",onClick:()=>{r(null===e||void 0===e?void 0:e.row)},disabled:"verified"===e.row.status,children:"Verification"})})}},{field:"action",headerName:"Action",flex:1,renderCell:e=>{const r=async e=>{b(e._id),N(!0)};return(0,C.jsxs)(a.A,{children:[(0,C.jsx)(s.A,{fontSize:"40px",color:"primary",onClick:()=>{(async e=>{v(e),W()})(null===e||void 0===e?void 0:e.row)},children:(0,C.jsx)(h.A,{})}),(0,C.jsx)(s.A,{color:"error",onClick:()=>{r(null===e||void 0===e?void 0:e.row)},children:(0,C.jsx)(p.A,{})})]})}}];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k.A,{openDelete:y,handleCloseDelete:S,deleteData:async e=>{const r=await(0,P.Gx)(`borrower/delete/${e}`,e);r&&200===r.status&&I(),S()},deleteId:f}),(0,C.jsx)(T,{drawerOpen:w,handleCloseDrawer:()=>D(!1),AddBorrowerDetails:async e=>{const r=await(0,P.d_)("borrower/add",e);r&&200===r.status&&I()},editBorrowerData:F,setEditBorrowerData:v,EditBorrowerDetails:async e=>{const r=await(0,P.X4)(`borrower/edit/${F._id}`,e);r&&200===r.status&&I()}}),(0,C.jsxs)(d.A,{children:[(0,C.jsxs)(o.A,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:[(0,C.jsx)(l.A,{variant:"h3",children:"Borrowers List"}),(0,C.jsx)(o.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,C.jsx)(t.A,{variant:"contained",startIcon:(0,C.jsx)(O.A,{icon:"eva:plus-fill"}),onClick:W,children:"Add Borrowers"})})]}),(0,C.jsx)(A.A,{children:(0,C.jsx)(a.A,{width:"100%",children:(0,C.jsx)(c.A,{style:{height:"600px"},children:(0,C.jsx)(u.zh,{rows:null!==i&&void 0!==i?i:[],rowHeight:70,columns:L,getRowId:e=>e._id,slots:{toolbar:m.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})})]})]})}}}]);