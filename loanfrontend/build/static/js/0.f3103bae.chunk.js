"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[0],{20660:function(e,t,n){n.d(t,{A:function(){return A}});n(9950);var i=n(10226),a=n(59254),o=n(63464),s=n(40033),l=n(28170),r=n(79739),d=n(25333),c=n(96319),u=n(82053),m=n(93230),x=n(44414);const h=(0,a.Ay)(o.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function p(e){const{children:t,onClose:n,...i}=e;return(0,x.jsxs)(s.A,{sx:{m:0,p:2},...i,children:[t,n?(0,x.jsx)(d.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,x.jsx)(c.A,{})}):null]})}function A(e){const{openDelete:t,handleCloseDelete:n,deleteData:a,deleteId:o}=e;return(0,x.jsx)("div",{children:(0,x.jsxs)(h,{"aria-labelledby":"customized-dialog-title",open:t,children:[(0,x.jsx)(p,{id:"customized-dialog-title",onClose:n,children:"Delete"}),(0,x.jsx)(l.A,{dividers:!0,children:(0,x.jsx)(u.A,{gutterBottom:!0,p:3,children:"Are you sure you want to delete this item?"})}),(0,x.jsx)(r.A,{children:(0,x.jsxs)(m.A,{direction:"row",spacing:2,children:[(0,x.jsx)(i.A,{variant:"contained",color:"error",onClick:()=>{a(o)},children:"Yes"}),(0,x.jsx)(i.A,{variant:"contained",onClick:n,children:"No"})]})})]})})}},62253:function(e,t,n){n(9950);var i=n(16491),a=n(82053),o=n(44414);t.A=e=>{let{title:t,subtitle:n}=e;return(0,o.jsxs)(i.A,{children:[(0,o.jsx)(a.A,{variant:"h4",fontWeight:"bold",sx:{mb:"5px"},style:{textTransform:"capitalize"},children:t}),(0,o.jsx)(a.A,{variant:"body1",children:n})]})}},22e3:function(e,t,n){n.r(t);var i=n(9950),a=n(13564),o=n(16491),s=n(19808),l=n(93230),r=n(10226),d=n(48089),c=n(55035),u=n(73062),m=n(57988),x=n(20660),h=n(27702),p=n(62253),A=n(64432),y=n(29635),j=n(59019),v=n(60764),f=n.n(v),g=n(27232),w=n(44414);t.default=()=>{const e=(0,a.Zp)(),t=(0,a.g)(),[n,v]=(0,i.useState)(""),[D,b]=(0,i.useState)(!1),[C,k]=(0,i.useState)([]),R=()=>b(!1),T=async()=>{const e=await(0,h.x4)(`loan/ReceivedPayment/History/${t.id}`);if(e&&200===e.status){var n;const t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.transactionHistory,i=null===t||void 0===t?void 0:t.map((e=>({...e,receiveAmount:e.receiveAmount,repaymentAmount:e.updatedRepaymentAmount,transactionDate:new Date(e.transactionDate).toLocaleString(),paymentType:e.paymentType,_id:e._id})));k(i)}},I=async e=>{const t=await(0,h.Gx)(`loan/receivedPayment/deleteHistory/${e}`);t&&200===t.status&&T(),R()};(0,i.useEffect)((()=>{T()}),[]);const N=[{field:"_id",headerName:"S.No.",flex:.5,valueGetter:e=>e.api.getRowIndexRelativeToVisibleRows(e.row._id)+1},{field:"receiveAmount",headerName:"Received Amount",flex:1},{field:"paymentType",headerName:"payment Type",flex:1},{field:"repaymentAmount",headerName:"Remaining Amount",flex:1},{field:"transactionDate",headerName:"Transaction Date",flex:1},{field:"action",headerName:"Action",flex:1,renderCell:e=>{const t=async e=>{v(e),b(!0)};return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(o.A,{sx:{display:"flex",alignItems:"center"},children:[(0,w.jsx)(x.A,{openDelete:D,deleteId:n,handleCloseDelete:R,deleteData:I}),(0,w.jsx)(o.A,{onClick:()=>t(null===e||void 0===e?void 0:e.row._id),children:(0,w.jsx)(m.A,{sx:{color:"red"}})})]})})}}];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(s.A,{children:[(0,w.jsxs)(l.A,{direction:"row",alignItems:"center",mb:3,justifyContent:"space-between",width:"100%",children:[(0,w.jsx)(p.A,{title:"Received payments History"}),(0,w.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:[(0,w.jsx)(r.A,{variant:"contained",color:"primary",onClick:()=>{e("/Loans/activeLoans")},startIcon:(0,w.jsx)(A.A,{}),children:"Back"}),(0,w.jsx)(r.A,{variant:"contained",color:"secondary",onClick:()=>{const e=new j.jsPDF,n=null===C||void 0===C?void 0:C.map(((e,t)=>[t+1,e.receiveAmount||"-",e.paymentType||"-",e.repaymentAmount||"-",e.transactionDate?new Date(e.transactionDate).toLocaleDateString():"-"]));f()(e,{head:[["S.No.","Received Amount","Payment Type","Remaining Amount","Transaction Date"]],body:n}),e.save(`loan:${t.id}.pdf`),g.oR.success("Payment History successfully")},startIcon:(0,w.jsx)(y.A,{}),children:"Download"})]})]}),(0,w.jsx)(o.A,{width:"100%",children:(0,w.jsx)(d.A,{style:{height:"600px",paddingTop:"15px"},children:(0,w.jsx)(c.zh,{rows:null!==C&&void 0!==C?C:[],columns:N,getRowId:e=>e._id,slots:{toolbar:u.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})]})})}}}]);