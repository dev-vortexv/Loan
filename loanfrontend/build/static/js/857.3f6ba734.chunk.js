"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[857],{35777:function(e,t,r){var a=r(59254),n=r(13048);const l=(0,a.Ay)("div")({"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{borderBottom:"none"},"& .name-column--cell":{color:n.A.primary.main,cursor:"pointer"},"& .name-column--cell--capitalize":{textTransform:"capitalize"},"& .name-column--cell:hover":{textDecoration:"underline"},"& .MuiDataGrid-columnHeaders":{backgroundColor:n.A.grey[200],borderBottom:"none",outline:"none !important",borderRadius:"0px"},"& .MuiDataGrid-virtualScroller":{scrollbarWidth:"1px"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{textTransform:"capitalize",fontSize:"15px"},".MuiDataGrid-cell:focus,.MuiDataGrid-columnHeader:focus,MuiDataGrid-columnHeaderCheckbox:focus":{outline:"none !important"},".css-1jiby6q-MuiDataGrid-root .MuiDataGrid-columnHeader:focus-within, .css-1jiby6q-MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"}});t.A=l},13048:function(e,t,r){var a=r(97497);const n={0:"#FFFFFF",100:"#F9FAFB",200:"#F4F6F8",300:"#DFE3E8",400:"#C4CDD5",500:"#919EAB",600:"#637381",700:"#454F5B",800:"#212B36",900:"#161C24"},l={common:{black:"#000",white:"#fff"},primary:{lighter:"#D1E9FC",light:"#76B0F1",main:"#2065D1",dark:"#103996",darker:"#061B64",contrastText:"#fff"},secondary:{lighter:"#D6E4FF",light:"#84A9FF",main:"#3366FF",dark:"#1939B7",darker:"#091A7A",contrastText:"#fff"},info:{lighter:"#D0F2FF",light:"#74CAFF",main:"#1890FF",dark:"#0C53B7",darker:"#04297A",contrastText:"#fff"},success:{lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D",contrastText:n[800]},warning:{lighter:"#FFF7CD",light:"#FFE16A",main:"#FFC107",dark:"#B78103",darker:"#7A4F01",contrastText:n[800]},error:{lighter:"#FFE7D9",light:"#FFA48D",main:"#FF4842",dark:"#B72136",darker:"#7A0C2E",contrastText:"#fff"},grey:n,divider:(0,a.X4)(n[500],.24),text:{primary:n[800],secondary:n[600],disabled:n[500]},background:{paper:"#fff",default:n[100],neutral:n[200]},action:{active:n[600],hover:(0,a.X4)(n[500],.08),selected:(0,a.X4)(n[500],.16),disabled:(0,a.X4)(n[500],.8),disabledBackground:(0,a.X4)(n[500],.24),focus:(0,a.X4)(n[500],.24),hoverOpacity:.08,disabledOpacity:.48}};t.A=l},73238:function(e,t,r){r.r(t),r.d(t,{default:function(){return P}});var a=r(9950),n=r(82053),l=r(16491),o=r(83274),i=r(25333),s=r(19808),d=r(93230),c=r(48089),u=r(35777),m=r(55035),h=r(73062),y=r(27702),A=r(99532),p=r(7762),v=r(43939),x=r(60666),f=r(63464),j=r(40033),g=r(28170),F=r(6493),b=r(60899),C=r(29277),D=r(8145),w=r(25979),T=r(70006),k=r(23266),M=r(24516),S=r(79739),B=r(10226),z=r(27232),R=r(44414);var N=e=>{const t=localStorage.getItem("user_id"),{open:r,handleClose:a,loanAmount:l,AddPaymentReceived:o,paymentData:i}=e,s=x.Ik({repaymentAmount:x.Yj().required("Total Amount is required"),receiveAmount:x.Yj().required("Receive Amount is required"),paymentType:x.Yj().required("Payment Type is required")}),d={repaymentAmount:l?l.repaymentAmount:"",receiveAmount:l?l.monthlyEmi:"",paymentType:"",createdBy:t},c=(0,v.Wx)({initialValues:d,validationSchema:s,enableReinitialize:!0,onSubmit:async(e,t)=>{let{resetForm:r}=t;o(l._id,e),z.oR.success("Add Received  Payment successfully"),a(),r()}});return(0,R.jsx)("div",{children:(0,R.jsxs)(f.A,{open:r,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,R.jsxs)(j.A,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,R.jsx)(n.A,{variant:"h6",children:"Add Received Payment"}),(0,R.jsx)(n.A,{children:(0,R.jsx)(p.A,{onClick:a,style:{cursor:"pointer"}})})]}),(0,R.jsx)(g.A,{dividers:!0,children:(0,R.jsx)("form",{children:(0,R.jsx)(F.A,{id:"scroll-dialog-description",tabIndex:-1,children:(0,R.jsxs)(b.Ay,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:[(0,R.jsxs)(b.Ay,{item:!0,xs:12,sm:12,md:12,children:[(0,R.jsx)(C.A,{children:"Total Loan Amount"}),(0,R.jsx)(D.A,{id:"repaymentAmount",name:"repaymentAmount",size:"small",fullWidth:!0,value:c.values.repaymentAmount,disabled:c.values.repaymentAmount,onChange:c.handleChange,error:c.touched.repaymentAmount&&Boolean(c.errors.repaymentAmount),helperText:c.touched.repaymentAmount&&c.errors.repaymentAmount})]}),(0,R.jsxs)(b.Ay,{item:!0,xs:12,sm:6,md:12,children:[(0,R.jsx)(C.A,{children:"Add Monthly EMI "}),(0,R.jsx)(D.A,{id:"receiveAmount",name:"receiveAmount",type:"number",size:"small",fullWidth:!0,value:c.values.receiveAmount,disabled:c.values.receiveAmount,onChange:c.handleChange,error:c.touched.receiveAmount&&Boolean(c.errors.receiveAmount),helperText:c.touched.receiveAmount&&c.errors.receiveAmount})]}),(0,R.jsxs)(b.Ay,{item:!0,xs:12,sm:6,md:12,children:[(0,R.jsx)(C.A,{children:"Payment Type"}),(0,R.jsxs)(w.A,{fullWidth:!0,children:[(0,R.jsx)(T.A,{labelId:"demo-simple-select-label",id:"",name:"paymentType",label:"",size:"small",value:c.values.paymentType||null,onChange:c.handleChange,error:c.touched.paymentType&&Boolean(c.errors.paymentType),children:null===i||void 0===i?void 0:i.map((e=>(0,R.jsx)(k.A,{value:e.paymentType,children:e.paymentType},e._id)))}),(0,R.jsx)(M.A,{error:c.touched.paymentType&&Boolean(c.errors.paymentType),children:c.touched.paymentType&&c.errors.paymentType})]})]})]})})})}),(0,R.jsxs)(S.A,{children:[(0,R.jsx)(B.A,{type:"submit",variant:"contained",onClick:c.handleSubmit,style:{textTransform:"capitalize"},color:"secondary",children:"Save"}),(0,R.jsx)(B.A,{type:"reset",variant:"outlined",style:{textTransform:"capitalize"},onClick:()=>{c.resetForm(),a()},color:"error",children:"Cancel"})]})]})})},E=r(62375),G=r(13564);var P=()=>{const e=localStorage.getItem("user_id"),t=(0,G.Zp)(),[r,p]=(0,a.useState)([]),[v,x]=(0,a.useState)([]),[f,j]=(0,a.useState)(!1),[g,F]=(0,a.useState)(""),[b,C]=(0,a.useState)([]),D=async()=>{const t=await(0,y.x4)(`loan/list/approved?createdBy=${e}`);t&&200===t.status&&p(t.data.loans)};(0,a.useEffect)((()=>{D(),(async()=>{const t=await(0,y.x4)(`currency/list?createdBy=${e}`);if(t&&200===t.status){const e=t.data.getAllResult.filter((e=>"active"===e.currencyStatus));x(e)}})(),(async()=>{const t=await(0,y.x4)(`paymentMethod/list/?createdBy=${e}`);t&&200===t.status&&C(t.data.getAllResult)})()}),[]);const w=(e,t,r)=>{const a=new Date(e);let n=new Date(a);switch(r){case"daily":n.setDate(n.getDate()+t);break;case"weekly":n.setDate(n.getDate()+7*t);break;case"monthly":n.setMonth(n.getMonth()+t);break;case"yearly":n.setFullYear(n.getFullYear()+t);break;default:return null}return n},T=[{field:"_id",headerName:"S.No.",flex:.5,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:e=>e.api.getAllRowIds().indexOf(e.id)+1},{field:"loanNumber",headerName:"Loan Number",flex:1,cellClassName:"name-column--cell--capitalize"},{field:"borrowers",headerName:"Borrowers",flex:1,cellClassName:"name-column--cell--capitalize"},{field:"loanStatus",headerName:"Loan Status",flex:1},{field:"monthlyEmi",headerName:"Monthly Emi",flex:1,renderCell:e=>{var t,r,a;return(0,R.jsxs)(n.A,{children:[`${null===(t=v[0])||void 0===t?void 0:t.currencySymbol} ${null!==e&&void 0!==e&&null!==(r=e.row)&&void 0!==r&&r.monthlyEmi?null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.monthlyEmi:"--"}`," "]})}},{field:"repaymentAmount",headerName:"Total Amount",flex:1,renderCell:e=>{var t,r;return(0,R.jsxs)(n.A,{children:[`${null===(t=v[0])||void 0===t?void 0:t.currencySymbol} ${null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.repaymentAmount}`," "]})}},{field:"dueDate",headerName:"Due Date",flex:1,renderCell:e=>{var t,r,a,l,o;return(0,R.jsx)(n.A,{children:null!==e&&void 0!==e&&null!==(t=e.row)&&void 0!==t&&t.releaseDate?null===(r=w(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.releaseDate,null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.loanDuration,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.durationPeriod))||void 0===r?void 0:r.toDateString():"-"})}},{field:"Action",headerName:"Action",flex:1,renderCell:e=>{const r=e=>{F(e),j(!0)};return(0,R.jsxs)(l.A,{children:[(0,R.jsx)(o.A,{title:"Add Received Payment",children:(0,R.jsx)(i.A,{fontSize:"40px",color:"primary",onClick:()=>r(e.row),children:(0,R.jsx)(A.A,{})})}),(0,R.jsx)(o.A,{title:"View History",children:(0,R.jsx)(i.A,{fontSize:"40px",color:"secondary",onClick:()=>(e=>{t(`/ReceivedPayment/History/${e.row._id}`)})(e),children:(0,R.jsx)(E.A,{})})})]})}}];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(N,{open:f,handleClose:()=>j(!1),loanAmount:g,AddPaymentReceived:async(e,t)=>{const r=await(0,y.X4)(`loan/ReceivePayment/${e}`,t);r&&200===r.status&&D()},paymentData:b}),(0,R.jsxs)(s.A,{children:[(0,R.jsx)(d.A,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:(0,R.jsx)(n.A,{variant:"h4",children:"Active-Loans-Lists"})}),(0,R.jsx)(u.A,{children:(0,R.jsx)(l.A,{width:"100%",children:(0,R.jsx)(c.A,{style:{height:"600px",paddingTop:"15px"},children:(0,R.jsx)(m.zh,{rows:null!==r&&void 0!==r?r:[],columns:T,getRowId:e=>e._id,slots:{toolbar:h.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})})]})]})}},99532:function(e,t,r){var a=r(24994);t.A=void 0;var n=a(r(79526)),l=r(44414);t.A=(0,n.default)((0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},7762:function(e,t,r){var a=r(24994);t.A=void 0;var n=a(r(79526)),l=r(44414);t.A=(0,n.default)((0,l.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},6493:function(e,t,r){r.d(t,{A:function(){return x}});var a=r(98587),n=r(58168),l=r(9950),o=r(72004),i=r(88465),s=r(59254),d=r(19608),c=r(18463),u=r(82053),m=r(1763),h=r(423);function y(e){return(0,h.Ay)("MuiDialogContentText",e)}(0,m.A)("MuiDialogContentText",["root"]);var A=r(44414);const p=["children","className"],v=(0,s.Ay)(u.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var x=l.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiDialogContentText"}),{className:l}=r,s=(0,a.A)(r,p),d=(e=>{const{classes:t}=e,r=(0,i.A)({root:["root"]},y,t);return(0,n.A)({},t,r)})(s);return(0,A.jsx)(v,(0,n.A)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:s,className:(0,o.A)(d.root,l)},r,{classes:d}))}))}}]);