"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[596],{49596:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=n(9950),a=n(19808),s=n(93230),r=n(82053),o=n(60899),d=n(48089),l=n(50704),c=n(16491),u=n(25713),x=n(10226),m=n(27702),p=n(59254),h=n(63464),g=n(40033),y=n(28170),A=n(79739),b=n(25333),f=n(96319),v=n(44414);const j=(0,p.Ay)(h.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function S(e){const{children:t,onClose:n,...i}=e;return(0,v.jsxs)(g.A,{sx:{m:0,p:2},...i,children:[t,n?(0,v.jsx)(b.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,v.jsx)(f.A,{})}):null]})}function k(e){const{openPayment:t,handleClosePayment:n,purchaseData:i,addPayments:a}=e;return(0,v.jsx)("div",{children:(0,v.jsxs)(j,{"aria-labelledby":"customized-dialog-title",open:t,children:[(0,v.jsx)(S,{id:"customized-dialog-title",onClose:n,children:"Subscription Confirmation"}),(0,v.jsx)(y.A,{dividers:!0,children:(0,v.jsx)(r.A,{gutterBottom:!0,p:3,children:"Are you sure you want to buy this item?"})}),(0,v.jsx)(A.A,{children:(0,v.jsxs)(s.A,{direction:"row",spacing:2,children:[(0,v.jsx)(x.A,{variant:"contained",color:"error",onClick:()=>{a(i),n()},children:"Yes"}),(0,v.jsx)(x.A,{variant:"contained",onClick:n,children:"No"})]})})]})})}var C=n(27232);var w=()=>{const e=localStorage.getItem("user_id"),t=localStorage.getItem("userRole"),[n,p]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1),[y,A]=(0,i.useState)(""),[b,f]=(0,i.useState)([]),[j,S]=(0,i.useState)([]),w=async()=>{const t=await(0,m.x4)(`payments/list/?createdBy=${e}`);var n;t&&200===t.status&&f(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.paymentsData)},W=async e=>{A(e),g(!0)};(0,i.useEffect)((()=>{(async()=>{const n=await(0,m.x4)("admin"===t?"packages/list":`packages/list/?createdBy=${e}`);var i;n&&200===n.status&&p(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.packagesAllData)})(),w(),(async()=>{const t=await(0,m.x4)(`currency/list?createdBy=${e}`);if(t&&200===t.status){const e=t.data.getAllResult.filter((e=>"active"===e.currencyStatus));S(e)}})()}),[]);const R=e=>b.some((t=>t.subscription_id===e));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{openPayment:h,handleClosePayment:()=>g(!1),purchaseData:y,addPayments:async t=>{const n={subscription_id:t._id,title:t.title,days:t.days,amount:t.amount,description:t.description,createdBy:e};if(b.some((e=>!0===e.active)))C.oR.error("Subscription Already Purchased");else{const e=await(0,m.d_)("payments/add",n);e&&201===e.status&&(C.oR.success("Payments Done Successfully"),await w())}}}),(0,v.jsxs)(a.A,{children:[(0,v.jsx)(s.A,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:(0,v.jsx)(r.A,{variant:"h4",children:" Subscription Details Lists"})}),(0,v.jsx)(o.Ay,{container:!0,spacing:5,children:null===n||void 0===n?void 0:n.map((e=>{var t;return(0,v.jsx)(o.Ay,{item:!0,md:3,xs:12,children:(0,v.jsxs)(d.A,{style:{height:"250px",backgroundColor:"#D6E4FF",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[(0,v.jsx)(l.A,{children:(0,v.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:[(0,v.jsx)(r.A,{sx:{fontSize:20,textAlign:"center",fontWeight:"bold",mb:2},variant:"h5",gutterBottom:!0,children:e.title}),(0,v.jsx)(r.A,{sx:{textAlign:"center",fontWeight:"bold"},variant:"h4",children:`${null===(t=j[0])||void 0===t?void 0:t.currencySymbol} ${e.amount}/${e.days} Days`}),(0,v.jsx)(c.A,{sx:{paddingTop:"20px",textAlign:"center"},children:(0,v.jsx)(r.A,{color:"text.secondary",variant:"body1",gutterBottom:!0,children:e.description})})]})}),(0,v.jsx)(u.A,{sx:{display:"flex",justifyContent:"center"},children:(0,v.jsx)(x.A,{size:"large",variant:"contained",color:"primary",onClick:()=>W(e),disabled:R(e._id),children:R(e._id)?"Purchased":"Buy Now"})})]})},e._id)}))})]})]})}},96319:function(e,t,n){var i=n(24994);t.A=void 0;var a=i(n(79526)),s=n(44414);t.A=(0,a.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},19808:function(e,t,n){n.d(t,{A:function(){return j}});var i=n(98587),a=n(58168),s=n(9950),r=n(72004),o=n(423),d=n(88465),l=n(35501),c=n(62161),u=n(95955),x=n(12860),m=n(44414);const p=["className","component","disableGutters","fixed","maxWidth","classes"],h=(0,x.A)(),g=(0,u.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,l.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),y=e=>(0,c.A)({props:e,name:"MuiContainer",defaultTheme:h});var A=n(61676),b=n(59254),f=n(18463);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=g,useThemeProps:n=y,componentName:c="MuiContainer"}=e,u=t((e=>{let{theme:t,ownerState:n}=e;return(0,a.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const i=n,a=t.breakpoints.values[i];return 0!==a&&(e[t.breakpoints.up(i)]={maxWidth:`${a}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return(0,a.A)({},"xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}})})),x=s.forwardRef((function(e,t){const s=n(e),{className:x,component:h="div",disableGutters:g=!1,fixed:y=!1,maxWidth:A="lg"}=s,b=(0,i.A)(s,p),f=(0,a.A)({},s,{component:h,disableGutters:g,fixed:y,maxWidth:A}),v=((e,t)=>{const{classes:n,fixed:i,disableGutters:a,maxWidth:s}=e,r={root:["root",s&&`maxWidth${(0,l.A)(String(s))}`,i&&"fixed",a&&"disableGutters"]};return(0,d.A)(r,(e=>(0,o.Ay)(t,e)),n)})(f,c);return(0,m.jsx)(u,(0,a.A)({as:h,ownerState:f,className:(0,r.A)(v.root,x),ref:t},b))}));return x}({createStyledComponent:(0,b.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${(0,A.A)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,f.b)({props:e,name:"MuiContainer"})});var j=v}}]);