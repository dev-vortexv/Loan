"use strict";(self.webpackChunkloan_management=self.webpackChunkloan_management||[]).push([[502],{20660:function(e,t,n){n.d(t,{A:function(){return f}});n(9950);var a=n(10226),r=n(59254),o=n(63464),i=n(40033),l=n(28170),s=n(79739),d=n(25333),c=n(96319),u=n(82053),m=n(93230),h=n(44414);const x=(0,r.Ay)(o.A)((e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}));function p(e){const{children:t,onClose:n,...a}=e;return(0,h.jsxs)(i.A,{sx:{m:0,p:2},...a,children:[t,n?(0,h.jsx)(d.A,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,h.jsx)(c.A,{})}):null]})}function f(e){const{openDelete:t,handleCloseDelete:n,deleteData:r,deleteId:o}=e;return(0,h.jsx)("div",{children:(0,h.jsxs)(x,{"aria-labelledby":"customized-dialog-title",open:t,children:[(0,h.jsx)(p,{id:"customized-dialog-title",onClose:n,children:"Delete"}),(0,h.jsx)(l.A,{dividers:!0,children:(0,h.jsx)(u.A,{gutterBottom:!0,p:3,children:"Are you sure you want to delete this item?"})}),(0,h.jsx)(s.A,{children:(0,h.jsxs)(m.A,{direction:"row",spacing:2,children:[(0,h.jsx)(a.A,{variant:"contained",color:"error",onClick:()=>{r(o)},children:"Yes"}),(0,h.jsx)(a.A,{variant:"contained",onClick:n,children:"No"})]})})]})})}},35777:function(e,t,n){var a=n(59254),r=n(13048);const o=(0,a.Ay)("div")({"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{borderBottom:"none"},"& .name-column--cell":{color:r.A.primary.main,cursor:"pointer"},"& .name-column--cell--capitalize":{textTransform:"capitalize"},"& .name-column--cell:hover":{textDecoration:"underline"},"& .MuiDataGrid-columnHeaders":{backgroundColor:r.A.grey[200],borderBottom:"none",outline:"none !important",borderRadius:"0px"},"& .MuiDataGrid-virtualScroller":{scrollbarWidth:"1px"},"& .MuiDataGrid-toolbarContainer .MuiButton-text":{textTransform:"capitalize",fontSize:"15px"},".MuiDataGrid-cell:focus,.MuiDataGrid-columnHeader:focus,MuiDataGrid-columnHeaderCheckbox:focus":{outline:"none !important"},".css-1jiby6q-MuiDataGrid-root .MuiDataGrid-columnHeader:focus-within, .css-1jiby6q-MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"}});t.A=o},13048:function(e,t,n){var a=n(97497);const r={0:"#FFFFFF",100:"#F9FAFB",200:"#F4F6F8",300:"#DFE3E8",400:"#C4CDD5",500:"#919EAB",600:"#637381",700:"#454F5B",800:"#212B36",900:"#161C24"},o={common:{black:"#000",white:"#fff"},primary:{lighter:"#D1E9FC",light:"#76B0F1",main:"#2065D1",dark:"#103996",darker:"#061B64",contrastText:"#fff"},secondary:{lighter:"#D6E4FF",light:"#84A9FF",main:"#3366FF",dark:"#1939B7",darker:"#091A7A",contrastText:"#fff"},info:{lighter:"#D0F2FF",light:"#74CAFF",main:"#1890FF",dark:"#0C53B7",darker:"#04297A",contrastText:"#fff"},success:{lighter:"#E9FCD4",light:"#AAF27F",main:"#54D62C",dark:"#229A16",darker:"#08660D",contrastText:r[800]},warning:{lighter:"#FFF7CD",light:"#FFE16A",main:"#FFC107",dark:"#B78103",darker:"#7A4F01",contrastText:r[800]},error:{lighter:"#FFE7D9",light:"#FFA48D",main:"#FF4842",dark:"#B72136",darker:"#7A0C2E",contrastText:"#fff"},grey:r,divider:(0,a.X4)(r[500],.24),text:{primary:r[800],secondary:r[600],disabled:r[500]},background:{paper:"#fff",default:r[100],neutral:r[200]},action:{active:r[600],hover:(0,a.X4)(r[500],.08),selected:(0,a.X4)(r[500],.16),disabled:(0,a.X4)(r[500],.8),disabledBackground:(0,a.X4)(r[500],.24),focus:(0,a.X4)(r[500],.24),hoverOpacity:.08,disabledOpacity:.48}};t.A=o},48875:function(e,t,n){n.d(t,{A:function(){return c}});var a=n(11942),r=n.n(a),o=n(9950),i=n(14650),l=n(16491),s=n(44414);const d=(0,o.forwardRef)(((e,t)=>{let{icon:n,width:a=20,sx:r,...o}=e;return(0,s.jsx)(l.A,{ref:t,component:i.In,icon:n,sx:{width:a,height:a,...r},...o})}));d.propTypes={sx:r().object,width:r().oneOfType([r().number,r().string]),icon:r().oneOfType([r().element,r().string])};var c=d},59502:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(9950),r=n(16491),o=n(25333),i=n(19808),l=n(93230),s=n(82053),d=n(10226),c=n(48089),u=n(35777),m=n(55035),h=n(73062),x=n(7999),p=n(57988),f=n(48875),A=n(63464),g=n(79739),y=n(28170),F=n(40033),j=n(60899),C=n(7762),b=n(43939),w=n(29277),D=n(27232),S=n(82108),v=(n(74388),n(47065)),k=n(44414);var E=e=>{const{open:t,handleClose:n,AddSettlementData:r,EditSettlementForm:o,editData:i,setEditData:l}=e,c=localStorage.getItem("user_id"),u=null===v.EditorState||void 0===v.EditorState?void 0:v.EditorState.createWithContent((0,v.convertFromRaw)({blocks:[{text:"{company_name}\n\nLusaka Zambia\n\nP.O BOX 1209,\n\nLusaka\n\n{current_date}\n\nDear {customer_name},\n\nREF: LOAN SETTLEMENT FORM\nWe are pleased to inform you that your loan with us has been fully settled. The details of the settlement are as follows:\n\nLoan Amount: {loan_amount}\nSettled Date: {settled_date}\nThe lender agrees to provide a loan of {loan_amount} to the borrower under the following terms and conditions:............................\n\nThe borrower agrees to repay the loan amount in installments within the loan tenure period. By signing this agreement, the borrower acknowledges and agrees to the terms and conditions set forth herein.\n\nSincerely,\n\n{company_name}\n{company_address}",type:"unstyled",entityRanges:[],depth:0,inlineStyleRanges:[]}],entityMap:{}})),[m,h]=(0,a.useState)(u);(0,a.useEffect)((()=>{if(i)try{h(v.EditorState.createWithContent((0,v.convertFromRaw)(JSON.parse(null===i||void 0===i?void 0:i.content))))}catch(e){console.error("Error parsing JSON:",e)}}),[i]);const x={createdBy:c},p=(0,b.Wx)({initialValues:x,onSubmit:async e=>{const t={...e,content:JSON.stringify((0,v.convertToRaw)(null===m||void 0===m?void 0:m.getCurrentContent()))};i?o(t):r(t),n(),l(""),h(u),!i&&D.oR.success("loan Settlement Form Add successfully")}});return(0,k.jsx)("div",{children:(0,k.jsxs)(A.A,{open:t,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:!0,children:[(0,k.jsxs)(F.A,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)(s.A,{variant:"h6",children:[" ",i?"Edit Settlement Form":"Add New Settlement Form"," "]}),(0,k.jsx)(s.A,{children:(0,k.jsx)(C.A,{onClick:n,style:{cursor:"pointer"}})})]}),(0,k.jsx)(y.A,{dividers:!0,children:(0,k.jsxs)("form",{children:[(0,k.jsx)(s.A,{style:{marginBottom:"15px"},variant:"h6",children:"Create Loan Settlement Form"}),(0,k.jsx)(j.Ay,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:(0,k.jsxs)(j.Ay,{item:!0,xs:12,children:[(0,k.jsx)(w.A,{children:"Create Form"}),(0,k.jsx)(S.Editor,{wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class",editorState:m,onEditorStateChange:e=>{h(e)}})]})})]})}),(0,k.jsxs)(g.A,{children:[(0,k.jsx)(d.A,{type:"submit",variant:"contained",onClick:p.handleSubmit,style:{textTransform:"capitalize"},children:"Save"}),(0,k.jsx)(d.A,{type:"reset",variant:"outlined",style:{textTransform:"capitalize"},color:"error",onClick:()=>{h(u),p.resetForm(),n(),l("")},children:"Cancel"})]})]})})},T=n(27702),B=n(20660);var N=()=>{const e=localStorage.getItem("user_id"),[t,n]=(0,a.useState)(!1),[A,g]=(0,a.useState)([]),[y,F]=(0,a.useState)(!1),[j,C]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),D=()=>n(!0),S=()=>F(!1),v=async()=>{const t=await(0,T.x4)(`loanSettlement/list?createdBy=${e}`);t&&200===t.status&&g(t.data.getAllResult)};(0,a.useEffect)((()=>{v()}),[]);const N=[{field:"_id",headerName:"Templates",flex:1,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:e=>e.api.getAllRowIds().indexOf(e.id)+1},{field:"customerName",headerName:"Customer Name",flex:1},{field:"companyName",headerName:"Company Name",flex:1},{field:"action",headerName:"Action",flex:1,renderCell:e=>{const t=e=>{C(e.row._id),F(!0)};return(0,k.jsxs)(r.A,{children:[(0,k.jsx)(o.A,{fontSize:"40px",color:"primary",onClick:()=>(w(e.row),void D()),children:(0,k.jsx)(x.A,{})}),(0,k.jsx)(o.A,{color:"error",onClick:()=>t(e),children:(0,k.jsx)(p.A,{})})]})}}];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(E,{open:t,handleClose:()=>n(!1),AddSettlementData:async e=>{const t=e,n=await(0,T.d_)("loanSettlement/add",t);n&&201===n.status&&v()},EditSettlementForm:async e=>{const t=await(0,T.X4)(`loanSettlement/edit/${b._id}`,e);t&&200===t.status&&v()},editData:b,setEditData:w}),(0,k.jsx)(B.A,{openDelete:y,handleCloseDelete:S,deleteId:j,deleteData:async e=>{const t=await(0,T.Gx)(`loanSettlement/delete/${e}`);t&&200===t.status&&v(),S()}}),(0,k.jsxs)(i.A,{children:[(0,k.jsxs)(l.A,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:[(0,k.jsx)(s.A,{variant:"h4",children:"Loan-settlement-Form"}),(0,k.jsx)(l.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:2,children:(0,k.jsx)(d.A,{variant:"contained",startIcon:(0,k.jsx)(f.A,{icon:"eva:plus-fill"}),onClick:D,children:"New Settlement Form"})})]}),(0,k.jsx)(u.A,{children:(0,k.jsx)(r.A,{width:"100%",children:(0,k.jsx)(c.A,{style:{height:"600px",paddingTop:"15px"},children:(0,k.jsx)(m.zh,{rows:null!==A&&void 0!==A?A:[],columns:N,getRowId:e=>e._id,slots:{toolbar:h.O},slotProps:{toolbar:{showQuickFilter:!0}}})})})})]})]})}}}]);